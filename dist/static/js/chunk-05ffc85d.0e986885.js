(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05ffc85d"],{ab4c:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"header"},[e.localIds?t("img",{staticClass:"header__logo",attrs:{src:e.localIds,alt:"logo"}}):t("img",{staticClass:"header__logo",attrs:{src:a("cf05"),alt:"logo"}}),t("p",{staticClass:"header__title"},[e._v("Vue-H5-Template")])]),t("van-form",{staticClass:"form",attrs:{"validate-trigger":"onSubmit","show-error":!1},on:{submit:e.onSubmit}},[t("van-field",{attrs:{type:"text",required:"",clearable:"",name:"邮箱",label:"邮箱",placeholder:"请输入邮箱地址",rules:[{required:!0,message:"请输入正确的邮箱地址!"}]},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),t("van-field",{attrs:{type:"password",required:"",center:"",clearable:"",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请输入正确的密码！"}]},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),t("div",{staticStyle:{margin:"36px"}},[t("van-button",{attrs:{round:"",block:"",loading:e.loading,type:"info","loading-text":"登录中...","native-type":"submit"}},[e._v("登录")]),t("van-button",{staticStyle:{"margin-top":"10px"},attrs:{plain:"",round:"",block:"",type:"info","native-type":"button",to:"/signup"}},[e._v("注册")]),t("van-button",{staticStyle:{"margin-top":"10px"},attrs:{round:"",block:"",type:"primary","native-type":"button"},on:{click:e.handleCapture}},[e._v("拍照")])],1)],1)],1)},o=[],n={name:"Login",data(){return{form:{username:"",password:"",captcha:"",isCaptchaShow:!1,sid:localStorage.getItem("sid")||""},localIds:"",loading:!1,captchaSvg:""}},methods:{onSubmit(){this.loading=!0,this.$store.dispatch("user/signin",this.form).then(()=>{this.$router.push("/power"),this.$notify({type:"success",message:"登录成功",duration:2e3,onOpened:()=>{this.loading=!1}})}).catch(()=>{this.loading=!1})},convertFileToBase64(e){return new Promise((t,a)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>{t(s.result)},s.onerror=()=>{a()}})},chooseImage({success:e}){const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.setAttribute("capture","camera"),t.setAttribute("id","el-"+Date.now()),t.style.display="none",document.body.append(t),t.addEventListener("change",async()=>{const a=t.files[0],s=await this.convertFileToBase64(a);e({localIds:s})}),t.click()},handleCapture(){this.chooseImage({success:({localIds:e})=>{this.localIds=e,console.log("localIds",e)}})}}},r=n,i=(a("e58b"),a("0b56")),l=Object(i["a"])(r,s,o,!1,null,"2f4bfd54",null);t["default"]=l.exports},b0a8:function(e,t,a){},cf05:function(e,t,a){e.exports=a.p+"973a6b8517b03a242441098747d00766.png"},e58b:function(e,t,a){"use strict";a("b0a8")}}]);
//# sourceMappingURL=chunk-05ffc85d.0e986885.js.map