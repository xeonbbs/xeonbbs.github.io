(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bb49bb42"],{"1e8a":function(t,e,s){},"591b":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("Swiper",{attrs:{banner:t.banner}}),e("Category",{attrs:{"cate-list":t.cateList}}),e("Goods",{attrs:{"goods-list":t.list,"is-finished":t.finished},on:{onReachBottom:t.onReachBottom},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}}),e("back-top"),t.isSkeletonShow?e("Skeleton"):t._e()],1)},a=[],r=s("b775");function n(){return Object(r["a"])({url:"/home/banner",method:"get"})}function c(){return Object(r["a"])({url:"/home/category",method:"get"})}function o(t){return Object(r["a"])({url:"/home/list",method:"post",data:t})}var l=function(){var t=this,e=t._self._c;return e("div",[e("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"white"}},t._l(t.banner,(function(t,s){return e("van-swipe-item",{key:s},[e("van-image",{staticStyle:{display:"block"},attrs:{"lazy-load":"",width:"100%",height:"150",src:t.img}})],1)})),1)],1)},h=[],d={props:{banner:{type:Array,default(){return[]}}}},u=d,p=s("0b56"),f=Object(p["a"])(u,l,h,!1,null,null,null),g=f.exports,m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"category"},[e("div",{ref:"scroll",staticClass:"scroll-wrapper"},[e("div",{staticClass:"scroll-content"},t._l(t.list,(function(s,i){return e("div",{key:i,staticClass:"scroll-item__wrapper"},t._l(s,(function(s,i){return e("div",{key:i,staticClass:"scroll-item"},[e("van-image",{attrs:{width:"35",height:"35",fill:"contain",src:s.icon}}),e("p",{staticClass:"text"},[t._v(t._s(s.name))])],1)})),0)})),0)]),t.list&&t.list.prev&&t.list.prev.length>5?e("div",{staticClass:"dot-wrapper"},[e("div",{staticClass:"dot",style:{transform:`translateX(${t.rate})`}})]):t._e()])},b=[],y=s("95ea"),v={props:{cateList:{type:Array,default(){return[]}}},data(){return{rate:0,breakPoint:0}},computed:{list(){let t={};const e=this.cateList,s=this.cateList.length;if(s<=5)t={prev:e,next:[]};else if(s>5&&s<=10)t={prev:e.slice(0,5),next:e.slice(5)};else{const s=Math.ceil(e.length/2);t={prev:e.slice(0,s),next:e.slice(s)}}return t}},watch:{cateList(t){t.length>5&&this.$nextTick(()=>{this.init()})}},beforeDestroy(){this.bs&&this.bs.destroy()},methods:{init(){this.bs=new y["a"](this.$refs.scroll,{scrollX:!0,scrollY:!1,click:!0,probeType:3});const t=Math.abs(this.bs.maxScrollX);this._registerHooks(["scroll"],e=>{const s=Math.abs(e.x);this.rate=Number(s/t*100).toFixed(2)+"%"})},_registerHooks(t,e){t.forEach(t=>{this.bs.on(t,e)})}}},x=v,_=(s("9f6c"),Object(p["a"])(x,m,b,!1,null,"d6fabc44",null)),w=_.exports,C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-goods"},[e("Title",{staticStyle:{background:"#fff"},attrs:{title:"为你推荐"}}),e("van-list",{attrs:{finished:t.isFinished,"finished-text":"没有更多了"},on:{load:t.onReachBottom},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[e("div",{staticClass:"main"},t._l(t.goodsList,(function(t,s){return e("goods-item",{key:s,attrs:{"product-id":t.productId,img:t.img,title:t.title,desc:t.desc,price:t.price,"old-price":t.oldPrice}})})),1)])],1)},k=[],S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-title"},[e("span",{staticClass:"line"}),e("span",{staticClass:"text"},[t._v(t._s(t.title))]),e("span",{staticClass:"line"})])},L=[],j={props:{title:{type:String,default:""}}},B=j,O=(s("6f0c"),Object(p["a"])(B,S,L,!1,null,"755095a2",null)),z=O.exports,P=function(){var t=this,e=t._self._c;return e("div",{staticClass:"goods-item"},[e("div",{staticClass:"pic"},[e("van-image",{attrs:{"lazy-load":"",width:"90",height:"100",src:t.img}})],1),e("p",{staticClass:"title"},[t._v(t._s(t.title))]),e("p",{staticClass:"desc"},[t._v(t._s(t.desc))]),e("div",{staticClass:"num"},[e("span",{staticClass:"num__now"},[t._v("¥"+t._s(t._f("toDecimal")(t.price)))]),e("span",{staticClass:"num__old"},[t._v("¥"+t._s(t._f("toDecimal")(t.oldPrice)))])]),e("div",{staticClass:"btn-wrapper"},[e("van-button",{staticClass:"btn",attrs:{size:"small"}},[t._v("立即购买")])],1)])},R=[],G={props:["productId","img","title","desc","price","oldPrice"]},N=G,$=(s("aeb2"),Object(p["a"])(N,P,R,!1,null,"c6ddcbdc",null)),T=$.exports,A={components:{GoodsItem:T,Title:z},model:{prop:"isLoading"},props:{goodsList:{type:Array,default(){return[]}},isLoading:{type:Boolean,default:!1},isFinished:{type:Boolean,default:!1}},computed:{loading:{get(){return this.isLoading},set(t){this.$emit("input",t)}}},methods:{onReachBottom(){this.$emit("onReachBottom")}}},D=A,F=(s("e871"),Object(p["a"])(D,C,k,!1,null,"58a73e7a",null)),H=F.exports,I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"skeleton"},[e("ContentLoader",{attrs:{width:"325",height:"600"}},[e("rect",{attrs:{x:"10",y:"8",rx:"3",ry:"3",width:"305",height:"30"}}),e("rect",{attrs:{x:"10",y:"45",rx:"3",ry:"3",width:"305",height:"130"}}),e("circle",{attrs:{cx:"35",cy:"210",r:"25"}}),e("circle",{attrs:{cx:"35",cy:"280",r:"25"}}),e("circle",{attrs:{cx:"100",cy:"210",r:"25"}}),e("circle",{attrs:{cx:"100",cy:"280",r:"25"}}),e("circle",{attrs:{cx:"165",cy:"210",r:"25"}}),e("circle",{attrs:{cx:"165",cy:"280",r:"25"}}),e("circle",{attrs:{cx:"230",cy:"210",r:"25"}}),e("circle",{attrs:{cx:"295",cy:"210",r:"25"}}),e("circle",{attrs:{cx:"230",cy:"280",r:"25"}}),e("circle",{attrs:{cx:"295",cy:"280",r:"25"}}),e("rect",{attrs:{x:"100",y:"340",rx:"3",ry:"3",width:"120",height:"20"}}),e("rect",{attrs:{x:"10",y:"370",rx:"3",ry:"3",width:"305",height:"130"}}),e("rect",{attrs:{x:"10",y:"510",rx:"3",ry:"3",width:"305",height:"10"}}),e("rect",{attrs:{x:"10",y:"540",rx:"3",ry:"3",width:"305",height:"10"}}),e("rect",{attrs:{x:"10",y:"570",rx:"3",ry:"3",width:"305",height:"10"}})])],1)},M=[],X=s("3e0b"),J={components:{ContentLoader:X["a"]}},E=J,Y=(s("68256"),Object(p["a"])(E,I,M,!1,null,"69a12d68",null)),q=Y.exports,K={name:"Home",components:{Swiper:g,Category:w,Goods:H,Skeleton:q},data(){return{banner:[],cateList:[],sessionList:[],list:[],pageNo:0,pageSize:4,loading:!1,finished:!1,refreshing:!1,isSkeletonShow:!0}},mounted(){Promise.all([this.getBanner(),this.getCategory()]).then(()=>{this.isSkeletonShow=!1})},methods:{getBanner(){return new Promise(t=>{n().then(e=>{this.banner=e.data,t()})})},getCategory(){return new Promise(t=>{c().then(e=>{const s=e.data;this.cateList=s,t()})})},getGoodsList(){o({pageSize:this.pageSize,pageNo:this.pageNo}).then(t=>{const e=t.data;this.refreshing?(this.list=e,this.refreshing=!1,this.finished=!1):(this.list=[...this.list,...e],e.length<this.pageSize&&(this.finished=!0)),this.loading=!1})},onReachBottom(){this.finished||(this.loading=!0,this.pageNo+=1,this.getGoodsList())}}},Q=K,U=(s("bb4a"),Object(p["a"])(Q,i,a,!1,null,"c593af9a",null));e["default"]=U.exports},68256:function(t,e,s){"use strict";s("dc61")},"6f0c":function(t,e,s){"use strict";s("fa48")},"73b5":function(t,e,s){},"85a7":function(t,e,s){},"9f6c":function(t,e,s){"use strict";s("85a7")},a506:function(t,e,s){},aeb2:function(t,e,s){"use strict";s("a506")},bb4a:function(t,e,s){"use strict";s("1e8a")},dc61:function(t,e,s){},e871:function(t,e,s){"use strict";s("73b5")},fa48:function(t,e,s){}}]);
//# sourceMappingURL=chunk-bb49bb42.0bab031b.js.map